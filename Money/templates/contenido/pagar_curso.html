{% extends "contenido/base.html" %}

{% block extra_head %}
<style>
    /* Estilos personalizados */
    .curso-container {
        width: 80%;
        margin: auto;
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .pago-form {
        display: flex;
        flex-direction: column;
    }
    .pago-boton {
        background-color: #008CBA;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
    }
    .pago-boton:hover {
        background-color: #005f5f;
    }
</style>
{% endblock %}

{% block content %}
<div class="curso-container">
    <h2 class="curso-titulo">{{ curso.titulo }}</h2>
    <p>Instructor: {{ curso.instructor.username }}</p>
    <p>Descripción: {{ curso.descripcion }}</p>
    <p>Precio: ${{ curso.precio }}</p>

    <form action="{% url 'pagar_curso' curso.id %}" method="post" class="pago-form">
        {% csrf_token %}
        <label for="metodo_pago">Método de Pago:</label>
        <select name="metodo_pago" id="metodo_pago">
            <option value="Tarjeta">Tarjeta de Crédito/Débito</option>
            <option value="Paypal">Paypal</option>
        </select>
        <button type="submit" class="pago-boton">Pagar ahora (Simulado)</button>
    </form>
</div>
<script>
    document.addEventListener('DOMContentLoaded', (event) => {
    const pagoForm = document.querySelector('.pago-form');

    pagoForm.addEventListener('submit', (e) => {
        e.preventDefault();

        const formData = new FormData(pagoForm);

        fetch('{% url "pagar_curso" curso.id %}', {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert(data.message);
            } else {
                alert('Ocurrió un error al procesar el pago.');
            }
        });
    });
});

</script>

{% endblock %}
